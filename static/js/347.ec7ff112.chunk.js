"use strict";(self.webpackChunkvk_clone=self.webpackChunkvk_clone||[]).push([[347],{4347:function(e,s,t){t.r(s),t.d(s,{default:function(){return g}});var n=t(885),r=t(2791),a=t(6030),i=t(6871),c=t(4657),u=t(184),o=r.memo((function(e){var s=e.text,t=e.photo,n=e.userName,r=e.userId,a=(0,i.s0)();return(0,u.jsxs)("div",{className:"message",children:[(0,u.jsx)("div",{style:{cursor:"pointer"},onClick:function(){a("/profile/".concat(r))},children:(0,u.jsx)("img",{className:"header__user_avatar",src:t||c,alt:"userAvatar"})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{children:(0,u.jsx)("span",{className:"message-name",children:n})}),(0,u.jsx)("div",{className:"message-text",children:s})]})]})})),l=t(3221),d=t(8943),m=t(4025),f=t(1413),h=t(9195);var v=t.p+"static/media/arrow-big.66a207f8abb24707691615e9eb0168a0.svg",x=r.memo((function(e){var s=e.status,t=(0,a.I0)(),n=(0,h.cI)({criteriaMode:"all",defaultValues:{message:""}}),r=n.register,i=n.handleSubmit,c=n.reset,o=i((function(e){if(e.message.trim()){if(!e.message)return;t((0,d.CJ)(e.message))}c()}));return(0,u.jsx)("div",{className:"chat-input",children:(0,u.jsxs)("form",{onSubmit:o,children:[(0,u.jsx)("input",(0,f.Z)({disabled:"ready"!==s,placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435..."},r("message"))),(0,u.jsx)("button",{disabled:"pending"===s,children:(0,u.jsx)("img",{src:v,alt:"sendButton"})})]})})})),g=(0,l.e)((function(){var e=(0,a.I0)(),s=(0,m.C)((function(e){return e.chat.messages})),t=(0,m.C)((function(e){return e.chat.status})),i=(0,r.useRef)(null),c=(0,r.useState)(!0),l=(0,n.Z)(c,2),f=l[0],h=l[1];(0,r.useEffect)((function(){return e((0,d.WE)()),function(){e((0,d.R7)())}}),[e]),(0,r.useEffect)((function(){var e;f&&(null===(e=i.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[s]);return(0,u.jsxs)("div",{className:"chat-content",children:[(0,u.jsx)("div",{className:"chat-message-top-block"}),(0,u.jsx)("div",{className:"chat-text",onScroll:function(e){var s=e.currentTarget;Math.abs(s.scrollHeight-s.scrollTop-s.clientHeight)<500?!f&&h(!0):f&&h(!1)},children:(0,u.jsxs)("div",{style:{overflow:"auto"},children:[" ",s.map((function(e){return(0,u.jsx)(o,{text:e.message,photo:e.photo,userName:e.userName,userId:e.userId},e.id)})),(0,u.jsx)("div",{ref:i})]})}),(0,u.jsx)(x,{status:t})]})}))},3221:function(e,s,t){t.d(s,{e:function(){return c}});var n=t(1413),r=(t(2791),t(6871)),a=t(4025),i=t(184);function c(e){return function(s){return(0,a.C)((function(e){return e.auth.isLogin}))?(0,i.jsx)(e,(0,n.Z)({},s)):(0,i.jsx)(r.Fg,{to:"/login"})}}}}]);
//# sourceMappingURL=347.ec7ff112.chunk.js.map