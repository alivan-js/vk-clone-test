"use strict";(self.webpackChunkvk_clone=self.webpackChunkvk_clone||[]).push([[419],{8419:function(e,s,t){t.r(s),t.d(s,{default:function(){return g}});var n=t(885),r=t(2791),a=t(6030),i=t(6871),c=t(184),u=r.memo((function(e){var s=e.text,t=e.photo,n=e.userName,r=e.userId,a=(0,i.s0)();return(0,c.jsxs)("div",{className:"message",children:[(0,c.jsx)("div",{style:{cursor:"pointer"},onClick:function(){a("/profile/".concat(r))},children:(0,c.jsx)("img",{className:"header__user_avatar",src:t||"/assets/img/avatar.jpg",alt:""})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:(0,c.jsx)("span",{className:"message-name",children:n})}),(0,c.jsx)("div",{className:"message-text",children:s})]})]})})),o=t(3221),l=t(8943),d=t(4025),m=t(1413),f=t(9195),h=r.memo((function(e){var s=e.status,t=(0,a.I0)(),n=(0,f.cI)({criteriaMode:"all",defaultValues:{message:""}}),r=n.register,i=n.handleSubmit,u=n.reset,o=i((function(e){if(e.message.trim()){if(!e.message)return;t((0,l.CJ)(e.message))}u()}));return(0,c.jsx)("div",{className:"chat-input",children:(0,c.jsxs)("form",{onSubmit:o,children:[(0,c.jsx)("input",(0,m.Z)({disabled:"ready"!==s,placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435..."},r("message"))),(0,c.jsx)("button",{disabled:"pending"===s,children:(0,c.jsx)("img",{src:"/assets/svg/arrow-big.svg",alt:"sendButton"})})]})})})),g=(0,o.e)((function(){var e=(0,a.I0)(),s=(0,d.C)((function(e){return e.chat.messages})),t=(0,d.C)((function(e){return e.chat.status})),i=(0,r.useRef)(null),o=(0,r.useState)(!0),m=(0,n.Z)(o,2),f=m[0],g=m[1];(0,r.useEffect)((function(){return e((0,l.WE)()),function(){e((0,l.R7)())}}),[e]),(0,r.useEffect)((function(){var e;f&&(null===(e=i.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[s]);return(0,c.jsxs)("div",{className:"chat-content",children:[(0,c.jsx)("div",{className:"chat-message-top-block"}),(0,c.jsxs)("div",{className:"chat-text",onScroll:function(e){var s=e.currentTarget;Math.abs(s.scrollHeight-s.scrollTop-s.clientHeight)<500?!f&&g(!0):f&&g(!1)},children:[s.map((function(e){return(0,c.jsx)(u,{text:e.message,photo:e.photo,userName:e.userName,userId:e.userId},e.id)})),(0,c.jsx)("div",{ref:i})]}),(0,c.jsx)(h,{status:t})]})}))},3221:function(e,s,t){t.d(s,{e:function(){return c}});var n=t(1413),r=(t(2791),t(6871)),a=t(4025),i=t(184);function c(e){return function(s){return(0,a.C)((function(e){return e.auth.isLogin}))?(0,i.jsx)(e,(0,n.Z)({},s)):(0,i.jsx)(r.Fg,{to:"/login"})}}}}]);
//# sourceMappingURL=419.2ae43acf.chunk.js.map